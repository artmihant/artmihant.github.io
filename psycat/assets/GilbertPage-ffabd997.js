import{k as x,i as T,j as G,l as q,m as H,r as O,o as h,c as m,p,v as _,a as e,n,F as E,h as S,u as z,d as R,w as U,z as W,J as X,q as F,s as I,t as f,x as Y}from"./index-b526ef89.js";const Z={class:"h-screen justify-center items-center flex flex-col flex-1 m-auto"},$={class:"relative"},ee={class:"h-screen justify-center flex flex-col flex-1"},te={class:"h-screen justify-center items-center flex flex-col flex-1 m-auto"},oe={class:"w-[550px]"},le=W("<p>Вы прошли тренировочный тест! А сейчас начнется настоящее испытание.</p><p>Напомним правила.</p><p>Сейчас на экране появится 12 квадратов.</p><p>Цвет одного отличается от цвета остальных.</p><p>Нужно как можно быстрее определить, в какой части экрана (правой или левой). от центра расположен этот квадрат, <br> нажав клавишу <b>Q</b> (слева) или <b>P</b> (справа)</p><p> При выполнении задания необходимо смотреть на крестик по центру экрана</p>",6),se={class:"text-center"},re={class:"h-screen flex w-full justify-center"},ne=e("div",{class:"h-screen justify-center flex flex-col flex-0"},[e("h1",null," Приготовьтесь... "),e("p",null,"(нажмите любую клавишу)")],-1),ce=[ne],ae={class:"h-screen flex w-full justify-center"},ie={class:"h-screen justify-center flex flex-0 gap-10"},de=e("h2",{class:"mt-48"}," Итоговый счет ",-1),ue={class:"border border-neutral-700"},he=e("tr",null,[e("th",{class:"pr-3 border"}),e("th",{class:"pr-3 border text-center"},"направление"),e("th",{class:"pr-3 border text-center"},"позиция"),e("th",{class:"pr-3 border text-center"},"реакция")],-1),me={class:"pr-3 border"},pe={class:"pr-3 border text-center"},_e={class:"pr-3 border text-center"},fe={class:"pr-3 border text-center"},ve={class:"mt-48 text-center font-bold"},be=e("button",{class:"rounded-lg border p-2 border-neutral-700 bg-white text-neutral-900"}," Далее ",-1),we={__name:"GilbertPage",async setup(ye){let v,M;const L=x(70),s=x(11.28),N=T("uid"),C=([v,M]=G(()=>X(F(I,"users",N))),v=await v,M(),v).data(),g=12,r={A:"#00ab81",B:"#00aa95",C:"#00aaaa",D:"#0095aa",N:"#b2b2b2",B:"#000000"},V=["color(display-p3 1 0 0.302)","color(display-p3 1 0 0)","color(display-p3 1 0.4482 0)","#6bff00","#a1ff00","#d7ff00","#0051ff","#0081ff","#00bcff"],a=x("init");function w(t){return Math.floor(Math.random()*t)}const b=q([]);for(let t=0;t<g;t++)b.push({color:r.B});const D=[[0,1],[2,1],[3,4],[5,4],[6,7],[8,7]],k=x(!1);let u=21,y=0,A=6;const P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=q(C.gilbert?C.gilbert:[]);i.length&&(a.value="score"),H(()=>{let t=!0;return i.forEach(o=>{t=t&&o.correctly}),t});let J=t=>{let o;t%u==0?(o=w(2),P.sort(()=>Math.random()-.5)):o=P[t%u-1],o=w(2);let d=w(6),l=!0;d+=6*o;let c=D[Math.floor(t/u)][0],Q=D[Math.floor(t/u)][1];return{target_color:c,ground_color:Q,position:d,direction:o,correctly:l}},B=()=>{for(let t=0;t<g;t++)b[t].color=r.N;k.value=!1,document.removeEventListener("keyup",B),K()},j=()=>{for(document.documentElement.requestFullscreen(),document.removeEventListener("keyup",j),y=0;i.length>0;)i.pop();a.value="prepare",document.addEventListener("keyup",B)},K=()=>{y<u*A?(a.value="play",setTimeout(()=>{k.value=!0,setTimeout(()=>{a.value="play";let t=Date.now(),o=J(y);i.push(o);for(let l=0;l<g;l++)b[l].color=V[l==o.position?o.target_color:o.ground_color];let d=l=>{let c;if(l.code=="KeyP")c=0;else if(l.code=="KeyQ")c=1;else return;document.removeEventListener("keydown",d),o&&(o.reaction_time=Date.now()-t,y+=1,o.correctly=c==o.direction),document.addEventListener("keyup",B)};document.addEventListener("keydown",d)},1e3)},250)):(Y(F(I,"users",N),{gilbert:i}),a.value="score")};return(t,o)=>{const d=O("router-link");return h(),m(E,null,[p(e("div",{class:"h-screen flex w-full justify-center",style:n({"background-color":r.N})},[e("div",Z,[e("div",$,[p(e("div",{class:"text-center absolute",style:n([{color:"#222","line-height":"1"},{top:"-"+s.value/2+"mm",left:"-"+s.value/2+"mm"}])},[e("table",null,[e("tr",null,[e("td",{style:n({"border-bottom":"1px solid "+r.B,"border-right":"1px solid "+r.B})},[e("div",{style:n({width:s.value/2+"mm",height:s.value/2+"mm"})},null,4)],4),e("td",{style:n({"border-bottom":"1px solid "+r.B,"border-left":"1px solid "+r.B})},[e("div",{style:n({width:s.value/2+"mm",height:s.value/2+"mm"})},null,4)],4)]),e("tr",null,[e("td",{style:n({"border-top":"1px solid "+r.B,"border-right":"1px solid "+r.B})},[e("div",{style:n({width:s.value/2+"mm",height:s.value/2+"mm"})},null,4)],4),e("td",{style:n({"border-top":"1px solid "+r.B,"border-left":"1px solid "+r.B})},[e("div",{style:n({width:s.value/2+"mm",height:s.value/2+"mm"})},null,4)],4)])])],4),[[_,k.value]]),(h(!0),m(E,null,S(b,(l,c)=>(h(),m("div",{class:"absolute",style:n({width:s.value+"mm",height:s.value+"mm",top:-s.value/2+-L.value*Math.cos(Math.PI/6*(c+.5))+"mm",left:-s.value/2+L.value*Math.sin(Math.PI/6*(c+.5))+"mm","background-color":l.color})},null,4))),256))])])],4),[[_,a.value=="play"]]),p(e("div",ee,[e("div",te,[e("div",oe,[le,e("div",se,[e("button",{onClick:o[0]||(o[0]=(...l)=>z(j)&&z(j)(...l)),class:"rounded-lg border p-2 border-neutral-700 bg-white text-neutral-900"},"Начать тест")])])])],512),[[_,a.value=="init"]]),p(e("div",re,ce,512),[[_,a.value=="prepare"]]),p(e("div",ae,[e("div",ie,[de,e("table",ue,[he,(h(!0),m(E,null,S(i,(l,c)=>(h(),m("tr",null,[e("td",me,f(c+1)+" "+f(l.correctly?"✔️":"❌"),1),e("td",pe,f(l.position),1),e("td",_e,f(l.direction?">":"<"),1),e("td",fe,f(l.reaction_time),1)]))),256))]),e("div",ve,[R(d,{to:"thanks"},{default:U(()=>[be]),_:1})])])],512),[[_,a.value=="score"]])],64)}}};export{we as default};
